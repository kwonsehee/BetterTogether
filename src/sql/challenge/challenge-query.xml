<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
   <entry key="selectList">
      SELECT
      	   RNUM
         , CHALL_NO
         , CHALL_TITLE
         , CHALL_PEOPLE
         , CHALL_DATE
         , FILE_PATH
         , CHALL_CONFIRM
         , CHALL_FREQUENCY
         , CHALL_PERIOD
         , CHALL_PAYMENT
         , CHALL_CONTENT
         , CHALL_COUNT
         , NICKNAME
         , CATE_NAME
         , CHALL_CNT
         , CHALL_START
      FROM 
           CLIST
     WHERE
     	   RNUM BETWEEN ? AND ?    
   </entry>
   
   <entry key = "selectChall">
      SELECT
           CHALL_NO
         , CHALL_TITLE
         , CHALL_PEOPLE
         , CHALL_DATE
         , FILE_PATH
         , CHALL_CONFIRM
         , CHALL_FREQUENCY
         , CHALL_PERIOD
         , CHALL_PAYMENT
         , CHALL_CONTENT
         , CHALL_COUNT
         , NICKNAME
         , USER_ID
         , CATE_NAME
         , CHALL_CNT
         , CHALL_START
      FROM
          CHALL
          JOIN CHALL_CATEGORY USING(CATE_ID)
          JOIN USER_INFO USING (USER_ID)
      WHERE 
           CHALL_NO = ?
   </entry>
   
   <entry key ="insertChall">
   INSERT
   INTO CHALL
   (
        CHALL_NO
     , CHALL_TITLE
     , CHALL_PEOPLE
     , CHALL_DATE
     , FILE_PATH
     , CHALL_CONFIRM
     , CHALL_FREQUENCY
     , CHALL_PERIOD
     , CHALL_PAYMENT
     , CHALL_CONTENT
     , CHALL_COUNT
     , USER_ID
     , CATE_ID
     , CHALL_CNT
     , CHALL_START
   )
   VALUES
   (
       SEQ_CID.NEXTVAL
     , ?
     , ?
     , SYSDATE
     , ?
     , ?
     , ?
     , ?
     , ?
     , ?
     , ?
     , ?
     , ?
     , DEFAULT
     , ?
   )
   </entry>
   
   <entry key = "getListCount">
   		SELECT
   			  COUNT(*)
   		 FROM 
   		 	  CHALL
   </entry>
   
   <entry key="getSearchTitleListCount">
   		SELECT
   			  COUNT(*)
   		 FROM 
   		 	  CHALL
   		WHERE
   			  CHALL_TITLE LIKE '%' || ? || '%'
   </entry>
   
   <entry key="getSearchCategoryListCount">
   		SELECT
   			  COUNT(*)
   		 FROM
   		 	  CHALL
   		 	  JOIN CATEGORY USING (CATE_ID)
   		WHERE
   			  CATE_NAME LIKE '%' || ? || '%'
   </entry>
   
   <entry key="getSearchWriterListCount">
   		SELECT
   		      COUNT(*)
   		 FROM 
   		 	  CHALL
   		 	  JOIN USER_INFO USING (USER_ID)
   		WHERE
   			  NICKNAME LIKE '%' || ? || '%' 	  
   </entry>
   
   <entry key="selectSearchTitleListCount">
   		SELECT
	   		   RNUM
	         , CHALL_NO
	         , CHALL_TITLE
	         , CHALL_PEOPLE
	         , CHALL_DATE
	         , FILE_PATH
	         , CHALL_CONFIRM
	         , CHALL_FREQUENCY
	         , CHALL_PERIOD
	         , CHALL_PAYMENT
	         , CHALL_CONTENT
	         , CHALL_COUNT
	         , NICKNAME
	         , CATE_NAME
	         , CHALL_CNT
	         , CHALL_START
	    FROM
	    	 (SELECT
	    	 			ROWNUM RNUM
	    	 		   , C.*
	    	 		FROM
	    	 			(SELECT
	    	 				   CHALL_NO
	    	 				 , CHALL_TITLE
	    	 				 , CHALL_PEOPLE
	    	 				 , CHALL_DATE
	    	 				 , FILE_PATH
	    	 				 , CHALL_CONFIRM
	    	 				 , CHALL_FREQUENCY
	    	 				 , CHALL_PERIOD
	    	 				 , CHALL_PAYMENT
                			 , CHALL_CONTENT
                			 , CHALL_COUNT
                			 , NICKNAME
                			 , CATE_NAME
                			 , CHALL_CNT
                			 , CHALL_START
         				 FROM
         				 	   CHALL
          					   JOIN CHALL_CATEGORY USING(CATE_ID)
          					   JOIN USER_INFO USING (USER_ID)
          				WHERE 
          					   CHALL_TITLE LIKE '%' || ? || '%'
          				ORDER BY
          						 CHALL_NO DESC)
          				 C)
          WHERE
          	   RNUM BETWEEN ? AND ? 
   </entry>
   
   <entry key="selectSearchCategoryListCount">
   SELECT
	   		   RNUM
	         , CHALL_NO
	         , CHALL_TITLE
	         , CHALL_PEOPLE
	         , CHALL_DATE
	         , FILE_PATH
	         , CHALL_CONFIRM
	         , CHALL_FREQUENCY
	         , CHALL_PERIOD
	         , CHALL_PAYMENT
	         , CHALL_CONTENT
	         , CHALL_COUNT
	         , NICKNAME
	         , CATE_NAME
	         , CHALL_CNT
	         , CHALL_START
	    FROM
	    	 (SELECT
	    	 			ROWNUM RNUM
	    	 		   , C.*
	    	 		FROM
	    	 			(SELECT
	    	 				   CHALL_NO
	    	 				 , CHALL_TITLE
	    	 				 , CHALL_PEOPLE
	    	 				 , CHALL_DATE
	    	 				 , FILE_PATH
	    	 				 , CHALL_CONFIRM
	    	 				 , CHALL_FREQUENCY
	    	 				 , CHALL_PERIOD
	    	 				 , CHALL_PAYMENT
                			 , CHALL_CONTENT
                			 , CHALL_COUNT
                			 , NICKNAME
                			 , CATE_NAME
                			 , CHALL_CNT
                			 , CHALL_START 
         				 FROM
         				 	   CHALL
          					   JOIN CHALL_CATEGORY USING(CATE_ID)
          					   JOIN USER_INFO USING (USER_ID)
          				WHERE 
          					   CATE_NAME LIKE '%' || ? || '%'
          				ORDER BY
          						 CHALL_NO DESC)
          				 C)
          WHERE
          	   RNUM BETWEEN ? AND ? 
   
   </entry>
   
   <entry key="selectSearchWriterListCount">
   SELECT
	   		   RNUM
	         , CHALL_NO
	         , CHALL_TITLE
	         , CHALL_PEOPLE
	         , CHALL_DATE
	         , FILE_PATH
	         , CHALL_CONFIRM
	         , CHALL_FREQUENCY
	         , CHALL_PERIOD
	         , CHALL_PAYMENT
	         , CHALL_CONTENT
	         , CHALL_COUNT
	         , NICKNAME
	         , CATE_NAME
	         , CHALL_CNT
	         , CHALL_START
	    FROM
	    	 (SELECT
	    	 			ROWNUM RNUM
	    	 		   , C.*
	    	 		FROM
	    	 			(SELECT
	    	 				   CHALL_NO
	    	 				 , CHALL_TITLE
	    	 				 , CHALL_PEOPLE
	    	 				 , CHALL_DATE
	    	 				 , FILE_PATH
	    	 				 , CHALL_CONFIRM
	    	 				 , CHALL_FREQUENCY
	    	 				 , CHALL_PERIOD
	    	 				 , CHALL_PAYMENT
                			 , CHALL_CONTENT
                			 , CHALL_COUNT
                			 , NICKNAME
                			 , CATE_NAME
                			 , CHALL_CNT
                			 , CHALL_START
         				 FROM
         				 	   CHALL
          					   JOIN CHALL_CATEGORY USING(CATE_ID)
          					   JOIN USER_INFO USING (USER_ID)
          				WHERE 
          					   NICKNAME LIKE '%' || ? || '%'
          				ORDER BY
          						 CHALL_NO DESC)
          				 C)
          WHERE
          	   RNUM BETWEEN ? AND ? 
   
   </entry>
   
   <entry key="increaseCount">
   		UPDATE
   			   CHALL
   	      SET
   	      	   CHALL_CNT = CHALL_CNT + 1
   	     WHERE
   	     	   CHALL_NO = ?
   </entry>
    <entry key="selectCateList">
  		SELECT 
   			RNUM
   		 , CHALL_NO
         , CHALL_TITLE
         , CHALL_PEOPLE
         , CHALL_DATE
         , FILE_PATH
         , CHALL_CONFIRM
         , CHALL_FREQUENCY
         , CHALL_PERIOD
         , CHALL_PAYMENT
         , CHALL_CONTENT
         , CHALL_COUNT
         , NICKNAME
         , CATE_NAME
         , CHALL_CNT
         , CHALL_START
	  FROM
		   (SELECT ROWNUM RNUM,A.*
    		  FROM (SELECT
      	   					CHALL_NO
        				  , CHALL_TITLE
       					  , CHALL_PEOPLE
       					  , CHALL_DATE
       					  , FILE_PATH
       					  , CHALL_CONFIRM
        				  , CHALL_FREQUENCY
     				      , CHALL_PERIOD
       				      , CHALL_PAYMENT
        				  , CHALL_CONTENT
          				  , CHALL_COUNT
        				  , NICKNAME
        				  , CATE_NAME
      				      , CHALL_CNT
          				  , CHALL_START
       				   FROM CHALL
          			   JOIN CHALL_CATEGORY USING(CATE_ID)
          			   JOIN USER_INFO USING (USER_ID)
        			  WHERE
           				    CATE_ID= ?
        		   ORDER BY CHALL_NO DESC)A)
		WHERE RNUM BETWEEN ? AND ?
   </entry>
   
   <entry key = "getCateListCount">
   		SELECT
   			  COUNT(*)
   		 FROM 
   		 	  CHALL
   		WHERE
   			  CATE_ID= ?
   </entry>

   <entry key="updateChallStatus">
   		UPDATE 
   			  CHALL_STATUS
   		   SET
   		  	  CHALL_STATUS = 1
   		 WHERE
   		 	  USER_ID = ? 
   		   AND 
   		   	  CHALL_NO = ?
   </entry>
   
   <entry key="insertChallHits">
   	INSERT
   		INTO CHALL_STATUS
   		(
   			USER_ID
   		  , CHALL_NO
   		  , JOIN_CALL_DATE
   		  , C_HITS
   		)
   		VALUES
   		(
   			?
   		  , ?
   		  , SYSDATE
   		  , 'Y'
   		)
   </entry>
   
   <entry key="selectHits">
   		SELECT
   			  C_HITS
   		 FROM 
   		 	  CHALL_STATUS
   		WHERE
   			  USER_ID = ?
   		   AND
   		      CHALL_NO = ?
   </entry>
   
   <entry key="deleteChallHits">
   		DELETE
   		  FROM CHALL_STATUS
   	     WHERE USER_ID = ? 
   	       AND CHALL_NO = ? 
   
   </entry>
   
   <entry key="selectListChallStatus">
   		SELECT
   			   USER_ID
   			 , CHALL_NO
   			 , CHALL_STATUS
   			 , JOIN_CALL_DATE
   			 , C_HITS
   		FROM
   			 CHALL_STATUS
   </entry>

   
   
  
   
   <entry key="joinPeopleCnt">
   		SELECT 
   			  COUNT(*)
   		 FROM 
   		 	  CHALL_STATUS
   		WHERE 
   		      CHALL_NO = ? 
   		  AND
   		  	  CHALL_STATUS = 1 
   </entry>
   
   <entry key = "selectChallStatus">
   		SELECT
   			  	USER_ID
   			  , CHALL_NO
   			  , CHALL_STATUS
   			  , JOIN_CALL_DATE
   			  , C_HITS
   	      FROM
   	      	   CHALL_STATUS
   	      WHERE
   	      	    CHALL_NO = ? 
   	      	AND 
   	      		USER_ID = ? 
   </entry>
   
   <entry key = "insertChallStatus">
   		INSERT
   		INTO CHALL_STATUS
   		(
   			USER_ID
   		  , CHALL_NO
   		  , JOIN_CALL_DATE
   		  , C_HITS
   		)
   		VALUES
   		(
   			?
   		  , ?
   		  , SYSDATE
   		  , 'N'
   		) 
   
   </entry>
   
   <entry key ="updateHitsStatus">
   		UPDATE
			  CHALL_STATUS 
		  SET
		  	  C_HITS = 'Y'
		WHERE 
			 USER_ID = ?
		  AND
		     CHALL_NO = ? 
		  AND 
		  	 C_HITS = 'N'
   </entry>
   
   <entry key ="selectJoinChallStatus">
   		SELECT
   			  CHALL_STATUS
   		 FROM 
   		 	  CHALL_STATUS
   		WHERE
   			  USER_ID = ?
   		   AND
   		      CHALL_NO = ?
   </entry>
   
   <entry key ="updateHitsStatus1">
   		UPDATE
			  CHALL_STATUS 
		  SET
		  	  C_HITS = 'N'
		WHERE 
			 USER_ID = ?
		  AND
		     CHALL_NO = ? 
		  AND 
		  	 C_HITS = 'Y'
   </entry>
   
   <!-- 우선 CHALL_CONTENT에 1/2/3 구분해두기 -->
   <entry key = "getChallTypeListCount">
   		SELECT
   			  COUNT(*)
   		 FROM 
   		 	  CHALL
   		WHERE
   			  CHALL_CONTENT= ? 
   </entry>
   
    <!-- 우선 CHALL_CONTENT에 1/2/3 구분해두기 -->
   <entry key="selectChallBoardType">
       SELECT 
   			RNUM
   		 , CHALL_NO
         , CHALL_TITLE
         , CHALL_PEOPLE
         , CHALL_DATE
         , FILE_PATH
         , CHALL_CONFIRM
         , CHALL_FREQUENCY
         , CHALL_PERIOD
         , CHALL_PAYMENT
         , CHALL_CONTENT
         , CHALL_COUNT
         , NICKNAME
         , CATE_NAME
         , CHALL_CNT
         , CHALL_START
	  FROM
		   (SELECT ROWNUM RNUM,T.*
    		  FROM (SELECT
      	   					CHALL_NO
        				  , CHALL_TITLE
       					  , CHALL_PEOPLE
       					  , CHALL_DATE
       					  , FILE_PATH
       					  , CHALL_CONFIRM
        				  , CHALL_FREQUENCY
     				      , CHALL_PERIOD
       				      , CHALL_PAYMENT
        				  , CHALL_CONTENT
          				  , CHALL_COUNT
        				  , NICKNAME
        				  , CATE_NAME
      				      , CHALL_CNT
          				  , CHALL_START
       				   FROM CHALL
          			   JOIN CHALL_CATEGORY USING(CATE_ID)
          			   JOIN USER_INFO USING (USER_ID)
        			  WHERE
           				    CHALL_CONTENT= ?
        		   ORDER BY CHALL_NO DESC)T)
		WHERE RNUM BETWEEN ? AND ?
   </entry>
   
   

    <entry key="selectTitle">
   		SELECT
   			  CHALL_TITLE
   		 FROM 
   		 	  CHALL
   		WHERE
   		      CHALL_NO = ?
   </entry>


</properties>